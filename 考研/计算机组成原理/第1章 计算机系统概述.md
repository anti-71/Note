# 第1章 计算机系统概述

## *1.1 计算机发展历程

### *1.1.1 计算机硬件的发展

#### 1.计算机的四代变化：

1946年，世界上第一台电子数字计算机（ENIAC）问世

​	1）**电子管时代**：逻辑元件为==电子管==，使用机器语言编程

​	2）**晶体管时代**：逻辑元件为==晶体管==，出现面向过程的程序设计语言：**FORTRAN**，有了操作系统的雏形

​	3）**中小规模集成电路时代**：逻辑元件为==中小规模集成电路==，有了分时操作系统

​	4）**超大规模集成电路时代**：逻辑元件为==大规模集成电路==和==超大规模集成电路==，产生了**微处理器（CPU）**

#### 2.计算器原件的更新换代：

*摩尔定律*：集成电路可容纳的晶体管数目，约每隔18个月便增加一倍，性能提升1倍

半导体存储器和微处理器发展

### *1.1.2 计算机软件的发展

- 计算机语言从面向机器的机器语言和汇编语言向面向问题的高级语言发展

## 1.2 计算机系统层次结构

### 1.2.1 计算机系统的组成

- 计算机系统由硬件系统和软件系统共同构成，软硬件在逻辑功能上是等价的

### 1.2.2 计算机硬件

#### 1.冯·诺依曼机基本思想

- 冯·诺依曼机的特点：

​	1）存储程序

​	2）由==运算器==、==存储器==、==控制器==、==输入设备==和==输出设备==组成

​	3）指令和数据以同等地位存储在存储器中

​	4）指令和数据以二进制码表示

​	5）指令由**操作码**和**地址码**组成

​	6）以运算器为中心

- 冯·诺伊曼机的基本工作方式：**控制流驱动**

- *存储程序*：将实现编制好的数据和程序送入主存储器，一旦程序被启动，无需人干涉，计算机会自动逐条执行指令，直至程序结束
- 现代计算机以存储器为中心，CPU=运算器+控制器，主机=CPU+主存

#### 2.计算机的功能部件

- **存储器**

  <img src="D:\Note\考研\计算机组成原理\Assets\主存储器.png" style="zoom: 33%;" />

  存储器分为==主存储器（主存）==和==辅助存储器（外存）==

  CPU能够直接访问主存储器，一般利用寄存器和Cache进行数据访问，必要时才读取内存

  **按地址存取方式**：主存储器按存储单元的地址进行存取

  ==存储器地址寄存器（MAR）==存放存取地址，==存储器数据寄存器（MDR）==暂存要从存储器中读或写的信息

  ==存储体==由许多**存储单元**组成，存储单元包含若干**存储元件**，存储元件存储二进制代码，这串代码叫**存储字**，位数叫**存储字长**，存储字长是8bit的偶数倍，**存储元**：存储二进制的电子元件，可存1bit

  MAR位数反映最多可寻址的存储单元个数，MDR位数通常等于存储字长，二者都存在于CPU中

  >1个字=16bit

- **运算器**

<img src="D:\Note\考研\计算机组成原理\Assets\运算器.png" style="zoom:33%;" />

运算器用于算术运算和逻辑运算

运算器的核心是**算术逻辑单元（ALU）**，还包含通用寄存器，如**累加器（ACC）**、**乘商寄存器（MQ）**、**操作数寄存器（X）**

运算器内还有**程序状态寄存器（PSW，标志寄存器）**，存放标志信息

- **控制器**

<img src="D:\Note\考研\计算机组成原理\Assets\控制器.png" style="zoom:33%;" />

控制器由**程序寄存器（PC）**、**指令寄存器（IR）**和**控制单元（CU）**组成

PC用来存放下一条指令的地址，只有自动+1的功能，可通过JMP指令设置

IR用来存放当前指令

CU用来分析指令并发出各种微操作命令序列

- 执行指令的过程

<img src="D:\Note\考研\计算机组成原理\Assets\冯诺依曼结构.png" style="zoom: 50%;" /><img src="D:\Note\考研\计算机组成原理\Assets\计算机的工作过程.png" style="zoom:33%;" />

- 在计算机系统中，地址空间的大小为 $2^n$ ，其中 n 是地址总线的位数。 

### 1.2.3 计算机软件

#### 1.系统软件和应用软件

**系统软件**：用来管理整个计算机系统，为系统软件提供服务。比如：操作系统（OS）、数据库管理系统（DBMS）、语言处理系统、网络软件系统、标准库程序、服务性程序

**应用软件**：按任务需要编制的程序

#### 2.三个级别的语言

- **机器语言**：二进制代码语言

​	**汇编语言**：用英文单词火气缩写代替二进制，必须胫骨经过汇编程序的翻译

​	**高级语言**：需经过编译程序编译成汇编语言程序

- **汇编程序（汇编器）**：汇编语言 → 机器语言

​	**解释程序（解释器）**：高级语言 → 机器语言，逐句翻译执行

​	**编译程序（编译器）**：高级语言 → 汇编语言或机器语言，一次性翻译后执行

### 1.2.4 计算机系统的层次结构

- 计算机系统的多级层次结构：

<img src="D:\Note\考研\计算机组成原理\Assets\计算机系统的多级层次结构.png" style="zoom: 33%;" />

- 没配备软件的纯硬件系统称为**裸机**
- 第三层到第五层称为**虚拟机器**，是软件实现的机器
- **指令集体系结构（ISA）**：软件和硬件之间的界面，定义了可支持哪些指令，每条指令的作用，每条指令的用法

### 1.2.5 计算机系统的工作原理

#### 1.“存储程序”工作方式

每条指令过程：根据PC取指令→指令译码，同时PC+1→取操作数并执行→送结果→回到第一步

#### 2.从源文件到可执行文件

<img src="D:\Note\考研\计算机组成原理\Assets\源程序转换为可执行文件的过程.png" style="zoom: 50%;" />

#### 3.指令执行过程的描述

1）取指令：PC→MAR→M→MDR→IR

2）分析指令：OP（IR）→CU

3）执行指令：Ad（IR）→MAR→M→MDR→ACC

## 1.3 计算机的性能指标

### 1.3.1 计算机的主要性能指标

#### 1.机器字长

简称字长，指计算机进行一次整数运算所能处理的二进制数据的位数，与CPU寄存器位数、ALU有关

#### 2.数据通路带宽

数据总线一次所能并行传送信息的位数

**数据通路**：各个子系统通过数据总线连接形成的数据传送路径

数据总线也是硬件的组成部分

#### 3.主存容量

主存储器所能存储信息的最大容量，通常以字节（B）来衡量，也可用字数×字长（$2^{MAR的位数}×MDR的位数$）来衡量

#### 4.运算速度

1）吞吐量和响应时间

​	**吞吐量**：系统在单位时间内处理请求(指令/程序，取决于具体场景)的数量

​	**响应时间**：用户向计算机发送一个请求到系统对该请求做出响应并获得所需结果的等待时间

2）主频和CPU时钟周期

​	**CPU时钟周期**：机器内部主时钟脉冲信号的宽度，单位：微秒、纳秒

​	**主频(CPU时钟频率)**：CPU内数字脉冲信号振荡的频率，单位：Hz

- CPU时钟周期=1/主频

3）**CPI**：执行一条指令所需的时钟周期数

**IPS**：每秒执行多少条指令，IPS=主频/平均CPI

>主频高的CPU一定更快？还要看平均CPI
>
>平均CPI相同，主频高的CPU一定更快？还要看指令系统，可能不支持相应指令

4）**CPU执行时间**

​	运行一个程序花费的时间

​	CPU执行时间=CPU时钟周期数/主频=(指令条数×CPI)÷主频

> CPU速度提高2倍，不等于时间缩小两倍，而是时间缩小1.5倍

5）**FLOPS**

​	每秒执行多少次浮点运算

​	IPS和FLOPS还能加K、M，表示数量，FLOPS前还能加G、T

>描述存储容量、文件大小时，K、M、G、T用2的幂次表示；在描述速率、频率时，k、M、G、T用10的幂次表示

#### 4.基准程序

专门用来进行性能评估的程序

设计高性能计算机主要采用并行处理技术

> 基准程序执行的快，代表性能一定越好？不一定，存在频度差异

### 1.3.2 几个专业术语

1）**系列机**

​	具有相同体系结构，使用相同基本指令体系的计算机产品系列，指令系统向后兼容

2）**兼容**

​	运行在某个计算机的软/硬件也能用在另一型号的计算机

3）**固件**

​	将程序固化在ROM中组成的部件
