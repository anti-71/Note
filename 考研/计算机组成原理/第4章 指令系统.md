# 第4章 指令系统

| 寻址方式           | 有效地址                        | 访存次数 (指令执行期间)       |
| ------------------ | ------------------------------- | ----------------------------- |
| 隐含寻址           | 程序指定                        | 0                             |
| 立即寻址           | A 即是操作数                    | 0                             |
| 直接寻址           | EA=A                            | 1                             |
| 一次间接寻址       | EA=(A)                          | 2                             |
| 寄存器寻址         | EA=R<sub>i</sub>                | 0                             |
| 寄存器间接一次寻址 | EA=(R<sub>i</sub>)              | 1                             |
| 相对寻址           | EA=(PC)+A                       | 1                             |
| 基址寻址           | EA=(BR)+A                       | 1                             |
| 变址寻址           | EA=(IX)+A                       | 1                             |
| 堆栈寻址           | 入栈 / 出栈时 EA 的确定方式不同 | 硬堆栈不访存，软堆栈访存 1 次 |

| AT&T 格式                | Intel 格式                                                   |                                                              |
| ------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 目的操作数 d、源操作数 s | `op s, d` 注：源操作数在左，目的操作数在右                   | `op d, s` 注：源操作数在右，目的操作数在左                   |
| 寄存器的表示             | `mov %ebx, %eax` 注：寄存器名之前必须加`%`                   | `mov eax, ebx` 注：直接写寄存器名即可                        |
| 立即数的表示             | `mov $985, %eax` 注：立即数之前必须加`$`                     | `mov eax, 985` 注：直接写数字即可                            |
| 主存地址的表示           | `mov %eax, (af996h)` 注：用 “小括号”                         | `mov [af996h], eax` 注：用 “中括号”                          |
| 读写长度的表示           | `movb $5, (af996h)` `movw $5, (af996h)` `movl $5, (af996h)` `addb $4, (af996h)` 注：指令后加 b、w、l 分别表示读写长度为 byte、word、dword | `mov byte ptr [af996h], 5` `mov word ptr [af996h], 5` `mov dword ptr [af996h], 5` `add byte ptr [af996h], 4` 注：在主存地址前说明读写长度 byte、word、dword |
| 主存地址偏移量的表示     | `movl -8(%ebx), %eax` 注：偏移量 (基址)  `movl 4(%ebx, %ecx, 32), %eax` 注：偏移量 (基址，变址，比例因子) | `mov eax, [ebx - 8]` 注：[基址 + 偏移量]  `mov eax, [ebx + ecx*32 + 4]` 注：[基址 + 变址 * 比例因子 + 偏移量] |

| 对比项目 \ 类别  | CISC                                 | RISC                                 |
| ---------------- | ------------------------------------ | ------------------------------------ |
| 指令系统         | 复杂、庞大                           | 简单，精简                           |
| 指令数目         | 一般大于 200 条                      | 一般小于 100 条                      |
| 指令字长         | 不固定                               | 定长                                 |
| 可访存指令       | 不加限制                             | 只有 Load/Store 指令                 |
| 各种指令执行时间 | 相差较大                             | 绝大多数在一个周期内完成             |
| 各种指令使用频度 | 相差很大                             | 都比较常用                           |
| 通用寄存器数量   | 较少                                 | 多                                   |
| 目标代码         | 难以用优化编译生成高效的目标代码程序 | 采用优化的编译程序，生成代码较为高效 |
| 控制方式         | 绝大多数为微程序控制                 | 绝大多数为组合逻辑控制               |
| 指令流水线       | 可以通过一定方式实现                 | 必须实现                             |