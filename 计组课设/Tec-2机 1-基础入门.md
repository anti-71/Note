# Tec-2机 1-基础入门

## 各指令含义

### E指令：逐“字”输入

![](D:\Note\计组课设\Assets\E.png)

最前面的0900是提示你当前位置，后面的0000是提示你，当前位置的内容是"0000"

Enter代表改动结束，Space代表改下一个，每一行会显示5个“字”

### A指令：编译输入

A,E指令的作用其实是一样的，可以理解为

E输入的是机器语言

A输入的是高级语言、编程语言<img src="D:\Note\计组课设\Assets\A.png" alt="(D:\Note\计组课设\Assets\E.png)" style="zoom: 67%;" />

**D指令：显示内容，“D800”会从0800位置向后显示128个“字”**

E指令中，直接把“AC00”这个内容存到0800中

A指令中，会把RET这个高级指令，“编译”成对应的machine code，也就是“AC00”，存到0801中

### U指令：反编译

U指令是A指令的逆

![](D:\Note\计组课设\Assets\U.png)

他会“反编译”一下，告诉你你每一个字（或者几个）代表什么意思

### G指令：GoGoGo

G指令会运行你的代码至RET为止，也就是说“RET”其实代表了一段代码的终止（相当于return），如果你没有RET，使用G指令会导致dead loop

<img src="D:\Note\计组课设\Assets\G.png" style="zoom:67%;" />

**R指令：显示所有寄存器的值**

使用G指令后，从指定位置启动，PC存放当前指令（0800，也就是RET），运行还没开始即结束

## 微程序实例

![](D:\Note\计组课设\Assets\相减微程序.png)

**示例微程序**

```
E900
0000 0E00 90B5 5402 0000 0E00 10F0 0002 0000 0E00 00F0 0000 0000 0E00 A0B5 5402 0000 0E00 10F0 0002 0000 0E01 02E0 0000 0029 0300 1020 0010
A800
MOV R1,900
MOV R2,7    
MOV R3,100
LDMC
RET
 
G800
A820
MOV R0,0365
MOV R1,0050
MOV [A00],R0
MOV [A01],R1
RET
 
G820
E829
D500 0A00 0A01 AC00
G829
DA00
```

**分析**

```
E900
0000 0E00 90B5 5402 0000 0E00 10F0 0002 0000 0E00 00F0 0000 0000 0E00 A0B5 5402 0000 0E00 10F0 0002 0000 0E01 02E0 0000 0029 0300 1020 0010
```

装入7条微指令到0900位置

题目中 `D5xx` ，控存入口100H，帮助中说明100H对应指令格式为 `D4`，实际上指令 `D400` - `D7FF` 所对应的是**同一个函数**，只要在这个范围内对应内容都在100H这个控存

```
A800
MOV R1,900
MOV R2,7    
MOV R3,100
LDMC
RET
 
G800
```

把一个微程序加载到控存里面

`LDMC` 这条指令，就是加载自定义指令的指令，调用时，会用到 `R1`,`R2`,`R3` 里面的内容，其分别是

`R1`:微指令起始位置

`R2`:微指令条数

`R3`:要加载到哪个控存

```
A820
MOV R0,0365
MOV R1,0050
MOV [A00],R0
MOV [A01],R1
RET
 
G820
```

准备工作，存放两个数到 `0A00` 和 `0A01`

```
E829
D500 0A00 0A01 AC00
G829
```

`D500`: 刚刚说的指令名字，在这道题里面，你 `D400` - `D7FF` 都可以

`0A00`: 第一个操作数 `ADDR1`

`0A01`: 第二个操作数 `ADDR2`

`AC00`: RET,程序结束

![](D:\Note\计组课设\Assets\相减结果.png)

减完之后存回 `0A00`